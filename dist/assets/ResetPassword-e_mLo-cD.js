import{d as P,u as V,l as B,r as v,a as b,m as R,b as q,c as a,e as s,w as N,f as n,g,v as x,n as _,t as m,p as j,h as w,q as E,j as y,F as L,i as k,o as r,k as S,_ as T}from"./main-OnMVSrWX.js";const H={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},I={class:"max-w-md w-full space-y-8"},A={class:"rounded-md shadow-sm -space-y-px"},D={key:0,class:"mt-1 text-sm text-red-600"},F={key:0,class:"mt-1 text-sm text-red-600"},U={key:0,class:"rounded-md bg-green-50 p-4"},O={class:"flex"},Y={class:"ml-3"},G={class:"text-sm font-medium text-green-800"},J={key:1,class:"rounded-md bg-red-50 p-4"},K={class:"flex"},Q={class:"ml-3"},W={class:"text-sm font-medium text-red-800"},X={key:2,class:"rounded-md bg-yellow-50 p-4"},Z={key:3},$=["disabled"],ee={class:"absolute left-0 inset-y-0 flex items-center pl-3"},se={key:0,class:"h-5 w-5 text-indigo-500 group-hover:text-indigo-400",fill:"currentColor",viewBox:"0 0 20 20"},oe={key:1,class:"animate-spin h-5 w-5 text-indigo-500",fill:"none",viewBox:"0 0 24 24"},te={class:"text-center space-y-2"},re=P({__name:"ResetPassword",setup(ae){const h=V(),z=B(),u=v(!1),i=v(""),d=v(""),f=v(!1),l=b({}),t=b({email:"",token:"",password:"",password_confirmation:""}),C=()=>{Object.keys(l).forEach(c=>{delete l[c]}),i.value="",d.value=""},M=async()=>{var c,e;C(),u.value=!0;try{const o=await S.resetPassword(t);o.success?(d.value=o.message||"Your password has been reset successfully!",setTimeout(()=>{z.push("/auth/login")},3e3)):(o.errors&&Object.assign(l,o.errors),i.value=o.message||"Failed to reset password. Please try again.",((c=o.message)!=null&&c.includes("token")||(e=o.message)!=null&&e.includes("expired"))&&(f.value=!0))}catch(o){console.error("Reset password error:",o),i.value="An unexpected error occurred. Please try again."}finally{u.value=!1}};return R(()=>{t.email=h.query.email||"",t.token=h.query.token||"",(!t.email||!t.token)&&(f.value=!0,i.value="Invalid reset link. Missing email or token.")}),(c,e)=>{const o=q("router-link");return r(),a("div",H,[s("div",I,[e[16]||(e[16]=s("div",null,[s("div",{class:"mx-auto h-12 w-auto flex justify-center"},[s("h1",{class:"text-3xl font-bold text-gray-900"},"AI-Book")]),s("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Reset your password "),s("p",{class:"mt-2 text-center text-sm text-gray-600"}," Enter your new password below ")],-1)),s("form",{class:"mt-8 space-y-6",onSubmit:N(M,["prevent"])},[s("div",A,[s("div",null,[e[3]||(e[3]=s("label",{for:"email",class:"sr-only"},"Email address",-1)),g(s("input",{id:"email","onUpdate:modelValue":e[0]||(e[0]=p=>t.email=p),name:"email",type:"email",autocomplete:"email",required:"",readonly:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm bg-gray-50",placeholder:"Email address"},null,512),[[x,t.email]])]),s("div",null,[e[4]||(e[4]=s("label",{for:"password",class:"sr-only"},"New Password",-1)),g(s("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=p=>t.password=p),name:"password",type:"password",autocomplete:"new-password",required:"",class:_(["appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",{"border-red-300":l.password}]),placeholder:"New password"},null,2),[[x,t.password]]),l.password?(r(),a("p",D,m(l.password[0]),1)):n("v-if",!0)]),s("div",null,[e[5]||(e[5]=s("label",{for:"password_confirmation",class:"sr-only"},"Confirm New Password",-1)),g(s("input",{id:"password_confirmation","onUpdate:modelValue":e[2]||(e[2]=p=>t.password_confirmation=p),name:"password_confirmation",type:"password",autocomplete:"new-password",required:"",class:_(["appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",{"border-red-300":l.password_confirmation}]),placeholder:"Confirm new password"},null,2),[[x,t.password_confirmation]]),l.password_confirmation?(r(),a("p",F,m(l.password_confirmation[0]),1)):n("v-if",!0)])]),n(" Success message "),d.value?(r(),a("div",U,[s("div",O,[e[7]||(e[7]=s("div",{class:"flex-shrink-0"},[s("svg",{class:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1)),s("div",Y,[s("h3",G,m(d.value),1),e[6]||(e[6]=s("p",{class:"mt-2 text-sm text-green-700"}," You can now sign in with your new password. ",-1))])])])):n("v-if",!0),n(" Error message "),i.value?(r(),a("div",J,[s("div",K,[e[8]||(e[8]=s("div",{class:"flex-shrink-0"},[s("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),s("div",Q,[s("h3",W,m(i.value),1)])])])):n("v-if",!0),n(" Invalid token error "),f.value?(r(),a("div",X,e[9]||(e[9]=[j('<div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div><div class="ml-3"><h3 class="text-sm font-medium text-yellow-800"> Invalid or expired reset link </h3><p class="mt-2 text-sm text-yellow-700"> This password reset link is invalid or has expired. Please request a new one. </p></div></div>',1)]))):n("v-if",!0),f.value?n("v-if",!0):(r(),a("div",Z,[s("button",{type:"submit",disabled:u.value||!!d.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[s("span",ee,[u.value?(r(),a("svg",oe,e[11]||(e[11]=[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(r(),a("svg",se,e[10]||(e[10]=[s("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),w(" "+m(u.value?"Resetting Password...":"Reset Password"),1)],8,$)])),s("div",te,[d.value?(r(),E(o,{key:0,to:"/auth/login",class:"font-medium text-indigo-600 hover:text-indigo-500"},{default:y(()=>e[12]||(e[12]=[w(" Sign in now ",-1)])),_:1,__:[12]})):(r(),a(L,{key:1},[k(o,{to:"/auth/login",class:"font-medium text-indigo-600 hover:text-indigo-500"},{default:y(()=>e[13]||(e[13]=[w(" Back to login ",-1)])),_:1,__:[13]}),e[15]||(e[15]=s("span",{class:"mx-2 text-gray-400"},"â€¢",-1)),k(o,{to:"/auth/forgot-password",class:"font-medium text-indigo-600 hover:text-indigo-500"},{default:y(()=>e[14]||(e[14]=[w(" Request new reset link ",-1)])),_:1,__:[14]})],64))])],32)])])}}}),ne=T(re,[["__file","/var/www/html/resources/js/pages/auth/ResetPassword.vue"]]);export{ne as default};
